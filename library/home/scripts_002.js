(function($,ns){"use strict";ns.nav={animationDuration:150,init:function(){console.log("TNW.nav.init");$("#nav a").smoothScroll();if($("html").hasClass("touch")){$("#toggle-nav").on("click",ns.nav.onToggleNav);$("#top-bar nav .has-dropdown > a").on("click",ns.nav.onToggleDropdown);$("html").on("click",ns.nav.collapseAll);$("#nav").on("click",function(e){e.stopPropagation()})}},collapseAll:function(){$("#nav").slideUp(ns.nav.animationDuration,function(){if($(this).not(":visible")){$(this).find(".active").removeClass("active");$(this).find(".dropdown").hide();$("#toggle-nav").removeClass("active")}})},onToggleNav:function(e){$(this).toggleClass("active");if($(this).hasClass("active")){$("#nav").slideDown()}else{ns.nav.collapseAll()}e.stopPropagation();e.preventDefault()},onToggleDropdown:function(e){var $dropdown=$(this).siblings(".dropdown");$(this).toggleClass("active");$dropdown[$(this).hasClass("active")?"slideDown":"slideUp"](ns.nav.animationDuration);e.preventDefault()}}})($,TNW);(function($,ns){"use strict";ns.popup={$el:null,cookieName:"_tnw-usa15-nl-hide",init:function(){console.log("TNW.popup.init");this.$el=$("#email-signup-popup");if($(window).outerWidth()<1024||$.cookie(ns.popup.cookieName)){return}setTimeout(function(){ns.popup.$el.css("display","block")},3e4);this.$el.find(".close").on("click touchstart",function(){ns.popup.hide()})},hide:function(){$.cookie(ns.popup.cookieName,1,{expires:30});ns.popup.$el.css("display","none")}}})($,TNW);(function($,ns){"use strict";ns.splash={selector:"#splash",selectorPattern:".pattern",init:function(){$(window).on("load resize",ns.splash.onLoadResize).trigger("resize");if($(ns.splash.selector).find(ns.splash.selectorPattern).length){$(window).on("scroll",ns.splash.onScroll)}},alignContent:function(){var containerHeight,containerWidth,contentHeight,contentWidth;$(ns.splash.selector).find(".content.center").each(function(){containerHeight=$(this).parent().height();containerWidth=$(this).parent().width();contentHeight=$(this).outerHeight();contentWidth=$(this).outerWidth();$(this).css({left:Math.round((containerWidth-contentWidth)*.5),top:Math.round((containerHeight-contentHeight)*.5)})})},onLoadResize:function(){ns.splash.alignContent()},onScroll:function(){$(ns.splash.selector).find(ns.splash.selectorPattern).css({"background-position-y":$(window).scrollTop()+"px"})}}})($,TNW);(function($,ns){"use strict";ns.site={init:function(){console.log("TNW.site.init");$('a[href^="#"]').each(function(){var $this=$(this),scrollOffset=$this.data("scroll-offset")?$this.data("scroll-offset"):-100;$this.smoothScroll({offset:scrollOffset})});if(window.location.hash!==""){$.smoothScroll({scrollTarget:window.location.hash,offset:-100})}if(ns.hasOwnProperty("nav")){ns.nav.init()}if(ns.hasOwnProperty("splash")){ns.splash.init()}if(ns.hasOwnProperty("popup")){ns.popup.init()}$(".quote").waypoint(function(){$(this).addClass("show")},{offset:"50%"});if($("#boost").length){$(window).on("scroll",function(){var scroll=$(document).scrollTop();$("#boost").css({"background-position":scroll+"px "+scroll*.5+"px"})})}ns.site.initCallout()},initCallout:function(){var viewportHeight=$(window).height();$(window).on("resize",function(){viewportHeight=$(window).height()});$(window).on("scroll",function(){$("#callout")[$(window).scrollTop()>viewportHeight*.25&&!ns.isMobile?"addClass":"removeClass"]("show")})}}})($,TNW);$(TNW.site.init);(function($,ns){"use strict";ns.countdown={init:function(){console.log("TNW.countdown.init");$(".tnw-countdown").each(function(){var $countdown,deadline;$countdown=$(this);deadline=$countdown.attr("data-timer-deadline");if(typeof deadline!=="undefined"){console.log("TNW.countdown started with deadline: "+deadline);$countdown.find(".tnw-countdown-counters").countdown(deadline,function(event){ns.countdown.updateView($(this),event)})}})},updateView:function($el,ev){$el.find(".tnw-countdown-days").text(ev.strftime("%D"));$el.find(".tnw-countdown-hours").text(ev.strftime("%H"));$el.find(".tnw-countdown-minutes").text(ev.strftime("%M"));$el.find(".tnw-countdown-seconds").text(ev.strftime("%S"))}}})($,TNW);$(TNW.countdown.init);(function($,ns){"use strict";ns.catFilter={init:function(){console.log("TNW.catFilter.init");var $featuredStartups=$("#featured-startups");if($featuredStartups.find(".category-filter-menu").length>0&&$featuredStartups.find(".category-filter-container").length>0){ns.catFilter.attachFilter($featuredStartups.find(".category-filter-menu"),$featuredStartups.find(".category-filter-container"))}},attachFilter:function($menu,$container){$menu.delegate("li","click",function(e){var catId=$(this).data("cat-id");if(catId>=0){ns.catFilter.filter($container,catId);ns.catFilter.updateMenu($menu,catId)}else{ns.catFilter.clear($container);ns.catFilter.clearMenu($menu)}$container.addClass("fadeIn");setTimeout(function(){$container.removeClass("fadeIn")},500)})},filter:function($cont,catId){$cont.toggleClass("grid",false);$cont.find(".category-filter-item").each(function(){var $this=$(this);$this.toggleClass("hidden",!$this.hasClass("cat-"+catId))})},clear:function($cont){$cont.toggleClass("grid",true);$cont.find(".category-filter-item").toggleClass("hidden",false)},updateMenu:function($menu,catId){$menu.toggleClass("is-active",catId>=0);$menu.find("li").each(function(){var $this=$(this);$this.toggleClass("active",$this.data("cat-id")===catId)})},clearMenu:function($menu){$menu.toggleClass("is-active",false);$menu.find("li").toggleClass("active",false)}}})($,TNW);$(TNW.catFilter.init);(function($,ns){"use strict";ns.livestream={$infoBlock:null,activeRoom:"digital_innovation",interval:null,scheduleData:null,iniTs:14478534e5,init:function(force){console.log("TNW.livestream.init");var forcedInit=typeof force=="boolean"?force:false;if(!forcedInit&&ns.livestream.getcurrentTs()<ns.livestream.iniTs){ns.livestream.checkLiveTime();return}$("#content").addClass("ls-on");this.$infoBlock=$("#ls-event-info");if(this.$infoBlock.length){if(typeof window.SCHEDULE_TIMELINE=="object"){ns.livestream.loadAndRun(window.SCHEDULE_TIMELINE)}else{ns.livestream.fetchData()}}},fetchData:function(){var dfr=$.Deferred();$.ajax({type:"POST",url:"/conference/usa/schedule/timeline",dataType:"json",success:dfr.resolve,error:dfr.reject});dfr.promise().always(function(){}).then(function(response){ns.livestream.loadAndRun(response)}).fail(function(){})},loadAndRun:function(data){ns.livestream.updateData(data);ns.livestream.updateView();if(!ns.livestream.interval){ns.livestream.run()}},run:function(){this.interval=window.setInterval(function(){ns.livestream.updateView()},12e4)},updateData:function(data){this.scheduleData=data},updateView:function(){var current=this.findCurrent(),next=this.findNext(),$infoBlock=$("#ls-event-info");$infoBlock.removeClass("live-now live-next");if(current!=null){$infoBlock.find(".ls-event-info-image img").attr("src",current.image);$infoBlock.find(".ls-event-info-name").text(current.title);$infoBlock.find(".ls-event-info-job").text([current.job_title,current.company].join(", "));$infoBlock.find(".ls-event-info-bio .bio-text").text(current.bio);$infoBlock.addClass("live-now")}else if(next!=null){$infoBlock.find(".ls-event-info-image img").attr("src",next.image);$infoBlock.find(".ls-event-info-name").text(next.title);$infoBlock.find(".ls-event-info-job").text([next.job_title,next.company].join(", "));$infoBlock.find(".ls-event-info-bio .bio-text").text(next.bio);$infoBlock.addClass("live-next")}},findCurrent:function(){var current=null,timeline=this.scheduleData.timeline[this.activeRoom],currentTs=this.getcurrentTs();for(var i=0;i<timeline.length;i++){if(timeline[i].timeframe[0]<=currentTs&&timeline[i].timeframe[1]>=currentTs){current=timeline[i];break}}if(current!=null){current=this.getSpeakerInfo(current)}return current},findNext:function(){var next=null,timeline=this.scheduleData.timeline[this.activeRoom],currentTs=this.getcurrentTs();for(var i=0;i<timeline.length;i++){if(timeline[i].timeframe[0]>=currentTs&&timeline[i].type=="speaker"&&+timeline[i].speaker>0&&this.scheduleData.info[+timeline[i].speaker]){next=timeline[i];break}}if(next!=null){next=this.getSpeakerInfo(next)}return next},getSpeakerInfo:function(info){var speakerInfo=null;if(info.type=="speaker"&&+info.speaker>0&&this.scheduleData.info[+info.speaker]){speakerInfo=this.scheduleData.info[+info.speaker]}return speakerInfo},checkLiveTime:function(){this.interval=window.setInterval(function(){if(ns.livestream.getcurrentTs()>=ns.livestream.iniTs){window.location.href="http://tnwlive.cloud"}},9e5)},getcurrentTs:function(){var curTs;curTs=+new Date;return curTs}}})($,TNW);$(TNW.livestream.init);